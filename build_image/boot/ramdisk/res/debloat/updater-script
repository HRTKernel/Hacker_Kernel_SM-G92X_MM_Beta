ui_print("Mounting Partitions");
assert(run_program("/sbin/mount", "-t", "auto", "/system"); || ui_print("system mounted"));
assert(run_program("/sbin/mount", "-t", "auto", "/preload"); || ui_print("preload mounted"));
assert(run_program("/sbin/mount", "-t", "auto", "/cache"); || ui_print("cache mounted"));
assert(run_program("/sbin/mount", "-t", "auto", "/data"); || ui_print("data mounted"));

ui_print(" ");
ui_print("Cleaning cache");
delete_recursive("/cache");
delete_recursive("/data/dalvik-cache");
ui_print("Cache cleaned");

ui_print(" ");
ui_print("Removing system/apps");
### /system/app/
delete_recursive("/system/app/AASAservice");
delete_recursive("/system/app/AccessControl");
delete_recursive("/system/app/AdvSoundDetector2015");
delete_recursive("/system/app/AntHalService");
delete_recursive("/system/app/ANTPlusPlugins");
delete_recursive("/system/app/ANTPlusTest");
delete_recursive("/system/app/ANTRadioService");
delete_recursive("/system/app/AirWakeUp");
delete_recursive("/system/app/AllShareCastPlayer");
delete_recursive("/system/app/AllshareFileShare");
delete_recursive("/system/app/AllshareFileShareClient");
delete_recursive("/system/app/AllshareFileShareServer");
delete_recursive("/system/app/AllshareMediaShare");
delete_recursive("/system/app/AssistantMenu2_ZERO");
delete_recursive("/system/app/BasicDreams");
delete_recursive("/system/app/BeaconManager_20");
delete_recursive("/system/app/BeamService");
delete_recursive("/system/app/BluetoothTest");
delete_recursive("/system/app/Books");
delete_recursive("/system/app/CarmodeStub");
delete_recursive("/system/app/ChocoEUKor");
delete_recursive("/system/app/Chrome");
delete_recursive("/system/app/ChromecastFrameworkService");
delete_recursive("/system/app/ChromeCustomizations");
delete_recursive("/system/app/CoolEUKor");
delete_recursive("/system/app/ColorBlind_L_NOBLE");
delete_recursive("/system/app/CoreApps");
delete_recursive("/system/app/DigitalClock_L");
delete_recursive("/system/app/DigitalClockEasy_L");
delete_recursive("/system/app/Drive");
delete_recursive("/system/app/Dropbox_zero");
delete_recursive("/system/app/DRParser");
delete_recursive("/system/app/DualClockDigital_L");
delete_recursive("/system/app/DualSimWidget");
delete_recursive("/system/app/EasymodeContactsWidget");
delete_recursive("/system/app/EdmSimPinService");
delete_recursive("/system/app/ELMAgent");
delete_recursive("/system/app/EmergencyLauncher");
delete_recursive("/system/app/EmergencyModeService");
delete_recursive("/system/app/EmergencyProvider");
delete_recursive("/system/app/Facebook_stub");
delete_recursive("/system/app/FactoryCamera_FB");
delete_recursive("/system/app/FBAppManager");
delete_recursive("/system/app/FBInstagram_stub");
delete_recursive("/system/app/FBMessenger_stub");
delete_recursive("/system/app/FidoUafClient");
delete_recursive("/system/app/FlipboardBriefing");
delete_recursive("/system/app/GearManagerStub");
delete_recursive("/system/app/Gmail2");
delete_recursive("/system/app/GoogleTTS");
delete_recursive("/system/app/Hangouts");
delete_recursive("/system/app/ImsSettings");
delete_recursive("/system/app/ImsTelephonyService");
delete_recursive("/system/app/IWlanContentProvider");
delete_recursive("/system/app/LVB");
delete_recursive("/system/app/Maps");
delete_recursive("/system/app/MDMApp");
delete_recursive("/system/app/minimode-res");
delete_recursive("/system/app/MirrorLink");
delete_recursive("/system/app/MobilePrintSvc_Samsung");
delete_recursive("/system/app/MobileTrackerEngineTwo");
delete_recursive("/system/app/MSSkype_stub");
delete_recursive("/system/app/Music2");
delete_recursive("/system/app/Newsstand");
delete_recursive("/system/app/Omc_v1-release");
delete_recursive("/system/app/OneDrive_Samsung");
delete_recursive("/system/app/OneNote_Compact_Samsung");
delete_recursive("/system/app/PageBuddyNotiSvc2");
delete_recursive("/system/app/PaymentFramework");
delete_recursive("/system/app/PartnerBookmarksProvider");
delete_recursive("/system/app/Personalization");
delete_recursive("/system/app/PlayGames");
delete_recursive("/system/app/PlusOne");
delete_recursive("/system/app/PopupuiReceiver");
delete_recursive("/system/app/PowerSharing");
delete_recursive("/system/app/Preconfig");
delete_recursive("/system/app/PreloadInstaller");
delete_recursive("/system/app/QuickConnect_20");
delete_recursive("/system/app/RemotePlayer");
delete_recursive("/system/app/ResourceManager");
delete_recursive("/system/app/ringtoneBR");
delete_recursive("/system/app/RoseEUKor");
delete_recursive("/system/app/SamsungSans");
delete_recursive("/system/app/SamsungContentsAgent");
delete_recursive("/system/app/SapaAudioConnectionService");
delete_recursive("/system/app/SapaMonitor");
delete_recursive("/system/app/SCONE_Android_ProxyService_Lib");
delete_recursive("/system/app/SecDict2Zero");
delete_recursive("/system/app/SecFactoryPhoneTest");
delete_recursive("/system/app/SecurityManagerService");
delete_recursive("/system/app/SecurityProviderSEC");
delete_recursive("/system/app/SecMemo2");
delete_recursive("/system/app/SilentLog");
delete_recursive("/system/app/Stk");
delete_recursive("/system/app/Stk2");
delete_recursive("/system/app/SimSettingMgr");
delete_recursive("/system/app/SLocation");
delete_recursive("/system/app/SmartRemote_zero");
delete_recursive("/system/app/SPlanner_Material");
delete_recursive("/system/app/SPlannerWidget_Material");
delete_recursive("/system/app/SPrintSpooler");
delete_recursive("/system/app/SPrintSpoolerLMR1");
delete_recursive("/system/app/SysScope");
delete_recursive("/system/app/Videos");
delete_recursive("/system/app/WebManual");
delete_recursive("/system/app/withTV");
delete_recursive("/system/app/Wluc");
delete_recursive("/system/app/WlanTest");
delete_recursive("/system/app/YahooLiveWeather");
delete_recursive("/system/app/YouTube");

ui_print(" ");
ui_print("Removing system/priv-apps");
### /system/priv-app/
delete_recursive("/system/priv-app/AutomationTest_FB");
delete_recursive("/system/priv-app/AutoPreconfig");
delete_recursive("/system/priv-app/BackupRestoreConfirmation");
delete_recursive("/system/priv-app/ContextProvider");
delete_recursive("/system/priv-app/DCMProvider");
delete_recursive("/system/priv-app/DirectShareManager");
delete_recursive("/system/priv-app/DeviceKeystring");
delete_recursive("/system/priv-app/DeviceTest");
delete_recursive("/system/priv-app/EasyLauncher2_Zero");
delete_recursive("/system/priv-app/Excel_SamsungStub");
delete_recursive("/system/priv-app/EdgeService");
delete_recursive("/system/priv-app/FidoUafAsm");
delete_recursive("/system/priv-app/FmmDM");
delete_recursive("/system/priv-app/FmmDS");
delete_recursive("/system/priv-app/FotaClient");
delete_recursive("/system/priv-app/GearManager");
delete_recursive("/system/priv-app/GoogleFeedback");
delete_recursive("/system/priv-app/GalaxyApps_3xh_zero");
delete_recursive("/system/priv-app/HancomOfficeViewer");
delete_recursive("/system/priv-app/HealthService");
delete_recursive("/system/priv-app/Hearingdro_V4");
delete_recursive("/system/priv-app/Hs20Settings");
delete_recursive("/system/priv-app/HwModuleTest");
delete_recursive("/system/priv-app/ImsLogger+");
delete_recursive("/system/priv-app/imsservice");
delete_recursive("/system/priv-app/Kies");
delete_recursive("/system/priv-app/MyPlaces");
delete_recursive("/system/priv-app/PCWClientS18");
delete_recursive("/system/priv-app/PhoneErrService");
delete_recursive("/system/priv-app/PowerPoint_SamsungStub");
delete_recursive("/system/priv-app/ProxyHandler");
delete_recursive("/system/priv-app/S-Voice_Android_phone");
delete_recursive("/system/priv-app/SamsungBilling");
delete_recursive("/system/priv-app/SamsungMagnifier2");
delete_recursive("/system/priv-app/SecEmbeddedServerService");
delete_recursive("/system/priv-app/sCloudBackupAppZero");
delete_recursive("/system/priv-app/sCloudDataRelay");
delete_recursive("/system/priv-app/sCloudDataSync");
delete_recursive("/system/priv-app/sCloudSyncCalendar");
delete_recursive("/system/priv-app/sCloudSyncContacts");
delete_recursive("/system/priv-app/sCloudSyncSBrowser");
delete_recursive("/system/priv-app/sCloudSyncSNote3");
delete_recursive("/system/priv-app/SecEmailComposer");
delete_recursive("/system/priv-app/SecEmailProvider");
delete_recursive("/system/priv-app/SecEmailSync");
delete_recursive("/system/priv-app/SecEmailUI");
delete_recursive("/system/priv-app/SecEmailWidget");
delete_recursive("/system/priv-app/SecLiveWallpapersPicker");
delete_recursive("/system/priv-app/SecMyFiles2015");
delete_recursive("/system/priv-app/SendHelpMessage");
delete_recursive("/system/priv-app/SFinder_L");
delete_recursive("/system/priv-app/SHealth4_2");
delete_recursive("/system/priv-app/SHealth4_3");
delete_recursive("/system/priv-app/SKMSAgent");
delete_recursive("/system/priv-app/S-Voice_Android_phone");
delete_recursive("/system/priv-app/SMcore");
delete_recursive("/system/priv-app/SNS_v2");
delete_recursive("/system/priv-app/SOAgent");
delete_recursive("/system/priv-app/SPDClient");
delete_recursive("/system/priv-app/SPPPushClient_Prod");
delete_recursive("/system/priv-app/SVF");
delete_recursive("/system/priv-app/SyncmlDM");
delete_recursive("/system/priv-app/Tag");
delete_recursive("/system/priv-app/VirtualTourViewer_WQHD_lightTheme");
delete_recursive("/system/priv-app/VoiceNote4Z_32");
delete_recursive("/system/priv-app/VoiceWakeUp");
delete_recursive("/system/priv-app/VRSetupWizardStub");
delete_recursive("/system/priv-app/WhatsAppDownloader");
delete_recursive("/system/priv-app/wssyncmlnps2");
delete_recursive("/system/priv-app/Word_SamsungStub");

ui_print(" ");
ui_print("Removing KNOX related files");
### knox
delete_recursive("/system/app/Bridge");
delete_recursive("/system/app/KNOXAgent");
delete_recursive("/system/app/KnoxAttestationAgent");
delete_recursive("/system/app/KnoxMigrationAgent");
delete_recursive("/system/app/KnoxSetupWizardClient");
delete_recursive("/system/app/KnoxSetupWizardStub");
delete_recursive("/system/app/KNOXStore");
delete_recursive("/system/app/KNOXStub");
delete_recursive("/system/app/KnoxVpnServices");
delete_recursive("/system/app/RCPComponents");
delete_recursive("/system/app/UniversalMDMClient");
delete_recursive("/system/priv-app/Bridge");
delete_recursive("/system/priv-app/KLMSAgent");
delete_recursive("/system/priv-app/KNOXAgent");
delete_recursive("/system/priv-app/KnoxAttestationAgent");
delete_recursive("/system/priv-app/KNOXStore");
delete_recursive("/system/priv-app/KNOXStub");
delete_recursive("/system/priv-app/KnoxVpnServices");
delete_recursive("/system/priv-app/RCPComponents");
delete_recursive("/system/priv-app/UniversalMDMClient");
delete("/system/lib/libknoxdrawglfunction.so");
delete_recursive("/system/container");
delete_recursive("/system/containers");
delete_recursive("/data/data/com.samsung.knox.rcp.components");
delete_recursive("/data/data/com.sec.knox.seandroid");
delete_recursive("/data/data/com.sec.knox.store");
delete_recursive("/data/data/com.sec.knox.containeragent");
delete_recursive("/data/data/com.sec.enterprise.knox.attestation");
delete_recursive("/data/data/com.sec.knox.app.container");
delete_recursive("/data/data/com.sec.knox.eventsmanager");
delete_recursive("/data/data/com.sec.enterprise.knox.cloudmdm.smdms");
delete_recursive("/data/data/com.sec.knox.bridge");
delete_recursive("/data/data/com.sec.knox.knoxsetupwizardclient");
delete_recursive("/data/data/com.sec.knox.setupwizardstub");
delete_recursive("/data/data/com.samsung.klmsagent");
delete_recursive("/data/data/com.samsung.android.walletmanager");
delete_recursive("/data/clipboard/knox");
delete_recursive("/system/etc/secure_storage/com.sec.knox.store");
delete_recursive("/data/system/knoxvpn");
delete_recursive("/system/etc/secure_storage/com.sec.knox.store");

unmount("/system");
unmount("/preload");
unmount("/cache");
unmount("/data");
ui_print(" ");
ui_print("All Done!");

set_progress(1.0);